{"mappings":"AAAO,MAAMA,EAAM,0EACbC,EAAcC,aAAaC,QAAQ,QCEzC,MAAMC,EAAqBC,SAASC,cAAc,SAC5CC,EAA2BF,SAASC,cAAc,WAClDE,EAAiBH,SAASC,cAAc,0BACxCG,EAAaP,aAAaC,QAAQ,YAClCO,EAAeR,aAAaC,QAAQ,kBACpCQ,EAAWT,aAAaC,QAAQ,gBAChCS,EAAOP,SAASC,cAAc,eCT7BO,eAA2BC,EAAQC,EAAMC,EAAsBC,GAClED,EAAIE,IAAMJ,EACVG,EAASE,UAAYJ,CACzB,CDQA,CAAYL,EAAcD,EAAYF,EAA0BH,GAuCjDC,SAASC,cAAc,eAC/Ba,UAAY,GAAGV,YAnCtBI,iBAEI,MAAMO,EAAM,2EAA2ET,eAEjFU,QAAiBC,MAAMF,GACvBG,QAAaF,EAASG,OAE5B,GADAC,QAAQC,IAAIH,GACD,MAARA,EAAa,CAEhB,MAAMI,EAAYC,OAAOC,OAAON,GAEhCE,QAAQC,IAAIC,GAOcG,EALLH,EAOrBf,EAAKmB,UAAY,GAEjBD,EAAIE,SAASC,IACT,MAAMC,EAAU7B,SAAS8B,cAAc,OACvCD,EAAQE,UAAUC,IAAI,aACtB,MAAMC,EAAUjC,SAAS8B,cAAc,KACvCG,EAAQnB,UAAY,GAAGc,IACvBC,EAAQK,OAAOD,GACf1B,EAAK4B,QAAQN,EAAA,GAdjB,CAIJ,IAA8BJ,CAF9B,CAnBAW,GDEO5B,eAA4B6B,GAE/B,MAAMrB,QAAiBC,MAAMtB,EAAM,SAC7BuB,QAAaF,EAASG,OAC5BC,QAAQC,IAAIH,GACZ,MAAMoB,EAAaf,OAAOC,OAAON,GAC3BqB,EAAYhB,OAAOiB,KAAKtB,IAG9B,SAAsBuB,GAClB,IAAIC,EAAY,EAEhBD,EAAMd,SAASgB,IACX,MAAM/B,SAAEA,EAAQH,OAAEA,GAAYkC,EAE9B,GAAI/B,GAAYhB,EAAa,CACzB,MAAMgD,EAAO5C,SAAS8B,cAAc,MACpCc,EAAK9B,UAAYF,EACjB,MAAMD,EAAMX,SAAS8B,cAAc,OACnCnB,EAAIE,IAAMJ,EACVE,EAAIkC,MAAMC,UAAY,QACtB,MAAMC,EAAW/C,SAAS8B,cAAc,OACxCiB,EAASb,OAAOU,EAAMjC,GACtB0B,EAAYH,OAAOa,GACnBA,EAAShB,UAAUC,IAAI,aAEvB,MAAMgB,EAAUT,EAAUG,GAE1B/B,EAAIsC,iBAAiB,SAAS,KAC1BpD,aAAaqD,QAAQ,WAAYtC,GACjCf,aAAaqD,QAAQ,iBAAkBzC,GACvCZ,aAAaqD,QAAQ,eAAgBF,GACrCG,YAAW,KACPC,OAAOC,SAASC,KAAO,0BACxB,OAEX,CAEAZ,GAAA,GAGR,CAjCAa,CAAajB,EAkCjB,CC3CA,CAAanC","sources":["src/modules/firebase.ts","src/modules/UserPage.ts","src/modules/gui.ts"],"sourcesContent":["export const url = \"https://js2-social-default-rtdb.europe-west1.firebasedatabase.app/users\";\nconst currentUser = localStorage.getItem('user');\n\nexport type firebaseUser = {\n    username: string,\n    avatar: string,\n    password: string,\n    posts: postObject\n}\n\nexport type postObject = {\n    message: string,\n}\n\n// get all users from firebase & show on profile page \nexport async function listAllUsers(userListDiv: HTMLDivElement) {\n\n    const response = await fetch(url + '.json');\n    const data = await response.json();\n    console.log(data);\n    const usersArray = Object.values(data);\n    const usersKeys = Object.keys(data);\n\n    getUsersList(usersArray)\n    function getUsersList(array) {\n        let i: number = 0;\n\n        array.forEach((list: firebaseUser) => {\n            const { username, avatar, } = list;\n\n            if (username != currentUser) {\n                const namn = document.createElement('h3');\n                namn.innerText = username;\n                const img = document.createElement('img');\n                img.src = avatar;\n                img.style.maxHeight = '100px';\n                const userCard = document.createElement('div');\n                userCard.append(namn, img)\n                userListDiv.append(userCard);\n                userCard.classList.add('user-card')\n\n                const usersId = usersKeys[i];\n\n                img.addEventListener('click', () => {\n                    localStorage.setItem('viewUser', username);\n                    localStorage.setItem('viewUserAvatar', avatar)\n                    localStorage.setItem('viewedUserId', usersId)\n                    setTimeout(() => {\n                        window.location.href = \"../html/userPage.html\"\n                    }, 100);\n                })\n            }\n\n            i++;\n        })\n\n    }\n}\n\n//delete user from firebase\nexport async function deleteUser(id, container: HTMLDivElement) {\n\n    const response = await fetch(url + `/${id}.json`, { method: 'DELETE' });\n    const data = await response.json();\n    console.log(data, \"user is removed\");\n\n    container.innerHTML = '';\n}\n\n// export async function getId(user) {\n\n//     const response = await fetch(url + '.json');\n//     const data = await response.json();\n//     console.log(data);\n\n//     const usersArray = Object.values(data);\n//     const keyArr = Object.keys(data);\n\n//     getUserId(usersArray)\n//     function getUserId(array) {\n//         let i = 0;\n\n//         array.forEach((list: firebaseUser) => {\n//             const { username } = list;\n\n//             if (username === user) {\n//                 const userId = keyArr[i];\n//                 console.log(userId);\n//                 localStorage.setItem('id', userId);\n\n//             }\n//             i++;\n//         })\n//     }\n// }\n\n//remove all posts from logged in user\nexport async function deletePosts(userId) {\n    const response = await fetch(url + `/${userId}/posts.json`, { method: 'DELETE' });\n    const data = await response.json();\n    console.log(data, \"posts are removed\");\n\n    location.reload();\n}","import { viewProfile } from \"./gui\";\nimport { listAllUsers } from \"./firebase\";\n\nconst profileBeingViewed = document.querySelector('#name') as HTMLElement;\nconst profileBeingViewedAvatar = document.querySelector('#avatar') as HTMLImageElement;\nconst usersContainer = document.querySelector('#other-users-container') as HTMLDivElement;\nconst viewedUser = localStorage.getItem('viewUser'); \nconst viewedAvatar = localStorage.getItem('viewUserAvatar');\nconst viewedId = localStorage.getItem('viewedUserId');\nconst post = document.querySelector('#post-card') as HTMLElement;\n\nviewProfile(viewedAvatar, viewedUser, profileBeingViewedAvatar, profileBeingViewed);\notherUser(); \ngetViewedUsersPost();\nlistAllUsers(usersContainer); \n\nasync function getViewedUsersPost() {\n\n    const url = `https://js2-social-default-rtdb.europe-west1.firebasedatabase.app/users/${viewedId}/posts.json`;\n\n    const response = await fetch(url);\n    const data = await response.json();\n    console.log(data);\n    if(data != null){\n    \n    const postArray = Object.values(data);\n    \n    console.log(postArray)\n\n    showViewedUsersPosts(postArray);\n    }\n\n}\n\nfunction showViewedUsersPosts(arr) {\n    \n    post.innerHTML = '';\n\n    arr.forEach((element: String) => {\n        const postDiv = document.createElement('div');\n        postDiv.classList.add('post-card');\n        const postTxt = document.createElement('p');\n        postTxt.innerText = `${element}`;\n        postDiv.append(postTxt)\n        post.prepend(postDiv);\n    });\n\n}\n\nfunction otherUser(){\n    const h3 = document.querySelector('#other-user') as HTMLElement;\n    h3.innerText = `${viewedUser}'s posts`; \n}","export async function viewProfile(avatar, user, img:HTMLImageElement, username:HTMLElement) {\n    img.src = avatar;\n    username.innerText = user;\n}\n\nexport function showPosts(arr, container:HTMLDivElement) {\n\n    container.innerHTML = '';\n\n    arr.forEach((element: String) => {\n        const postDiv = document.createElement('div');\n        postDiv.classList.add('post-card');\n        const postTxt = document.createElement('p');\n        postTxt.innerText = `${element}`;\n        postDiv.append(postTxt)\n        container.prepend(postDiv);\n    });\n\n}"],"names":["$14f6629ccf7de9b8$export$128fa18b7194ef","$14f6629ccf7de9b8$var$currentUser","localStorage","getItem","$0af65bff234c3dba$var$profileBeingViewed","document","querySelector","$0af65bff234c3dba$var$profileBeingViewedAvatar","$0af65bff234c3dba$var$usersContainer","$0af65bff234c3dba$var$viewedUser","$0af65bff234c3dba$var$viewedAvatar","$0af65bff234c3dba$var$viewedId","$0af65bff234c3dba$var$post","async","avatar","user","img","username","src","innerText","url","response","fetch","data","json","console","log","postArray","Object","values","arr","innerHTML","forEach","element","postDiv","createElement","classList","add","postTxt","append","prepend","$0af65bff234c3dba$var$getViewedUsersPost","userListDiv","usersArray","usersKeys","keys","array","i","list","namn","style","maxHeight","userCard","usersId","addEventListener","setItem","setTimeout","window","location","href","getUsersList"],"version":3,"file":"userPage.45453f1e.js.map"}