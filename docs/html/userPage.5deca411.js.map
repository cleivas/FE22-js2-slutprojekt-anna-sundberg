{"mappings":"AAAO,MAAMA,EAAM,0EACbC,EAAcC,aAAaC,QAAQ,QCEzC,MAAMC,EAAkBC,SAASC,cAAc,SACzCC,EAAwBF,SAASC,cAAc,WAC/CE,EAAiBH,SAASC,cAAc,0BACxCG,EAAaP,aAAaC,QAAQ,YAClCO,EAAeR,aAAaC,QAAQ,kBACpCQ,EAAWT,aAAaC,QAAQ,gBAE3BE,SAASC,cAAc,eAC/BM,UAAY,GAAGH,YCXXI,eAA2BC,EAAQC,EAAMC,EAAsBC,GAClED,EAAIE,IAAMJ,EACVG,EAASL,UAAYG,CACzB,CDUA,CAAYL,EAAcD,EAAYF,EAAuBH,GAM7DS,iBAEI,MAAMM,QAAiBC,MAAMpB,EAAM,IAAIW,gBACjCU,QAAaF,EAASG,OAE5B,GADAC,QAAQC,IAAIH,GACA,MAARA,EAAc,CAEd,MAAMI,EAAYC,OAAOC,OAAON,GAEhCE,QAAQC,IAAIC,GCRiBG,EDURH,GCVaI,EDUFC,GCR1BC,UAAY,GAEtBH,EAAII,SAASC,IACT,MAAMC,EAAU7B,SAAS8B,cAAc,OACvCD,EAAQE,UAAUC,IAAI,aACtB,MAAMC,EAAUjC,SAAS8B,cAAc,KACvCG,EAAQ1B,UAAY,GAAGqB,IACvBC,EAAQK,OAAOD,GACfT,EAAUW,QAAQN,EAAA,GDCtB,CCXG,IAA8BN,EAAKC,CDa1C,CAnBAY,GDCO5B,eAA4B6B,GAE/B,MAAMvB,QAAiBC,MAAMpB,EAAM,SAC7BqB,QAAaF,EAASG,OAC5BC,QAAQC,IAAIH,GACZ,MAAMsB,EAAajB,OAAOC,OAAON,GAC3BuB,EAAYlB,OAAOmB,KAAKxB,IAG9B,SAAsByB,GAClB,IAAIC,EAAY,EAEhBD,EAAMd,SAASgB,IACX,MAAM/B,SAAEA,EAAQH,OAAEA,GAAYkC,EAE9B,GAAI/B,GAAYhB,EAAa,CACzB,MAAMgD,EAAO5C,SAAS8B,cAAc,MACpCc,EAAKrC,UAAYK,EACjB,MAAMD,EAAMX,SAAS8B,cAAc,OACnCnB,EAAIE,IAAMJ,EACVE,EAAIkC,MAAMC,UAAY,QACtB,MAAMC,EAAW/C,SAAS8B,cAAc,OACxCiB,EAASb,OAAOU,EAAMjC,GACtB0B,EAAYH,OAAOa,GACnBA,EAAShB,UAAUC,IAAI,aAEvB,MAAMgB,EAAUT,EAAUG,GAE1B/B,EAAIsC,iBAAiB,SAAS,KAC1BpD,aAAaqD,QAAQ,WAAYtC,GACjCf,aAAaqD,QAAQ,iBAAkBzC,GACvCZ,aAAaqD,QAAQ,eAAgBF,GACrCG,YAAW,KACPC,OAAOC,SAASC,KAAO,0BACxB,OAEX,CAEAZ,GAAA,GAGR,CAjCAa,CAAajB,EAkCjB,CC1CA,CAAanC,GAGb,MAAMsB,EAAOzB,SAASC,cAAc","sources":["src/modules/firebase.ts","src/modules/UserPage.ts","src/modules/gui.ts"],"sourcesContent":["export const url = \"https://js2-social-default-rtdb.europe-west1.firebasedatabase.app/users\";\nconst currentUser = localStorage.getItem('user');\n\nexport type firebaseUser = {\n    username: string,\n    avatar: string,\n    password: string,\n    posts: postObject\n}\n\nexport type postObject = {\n    message: string,\n}\n\n// get all users from firebase & show on profile page \nexport async function listAllUsers(userListDiv: HTMLDivElement) {\n\n    const response = await fetch(url + '.json');\n    const data = await response.json();\n    console.log(data);\n    const usersArray = Object.values(data);\n    const usersKeys = Object.keys(data);\n\n    getUsersList(usersArray)\n    function getUsersList(array) {\n        let i: number = 0;\n\n        array.forEach((list: firebaseUser) => {\n            const { username, avatar, } = list;\n\n            if (username != currentUser) {\n                const namn = document.createElement('h3');\n                namn.innerText = username;\n                const img = document.createElement('img');\n                img.src = avatar;\n                img.style.maxHeight = '100px';\n                const userCard = document.createElement('div');\n                userCard.append(namn, img)\n                userListDiv.append(userCard);\n                userCard.classList.add('user-card')\n\n                const usersId = usersKeys[i];\n\n                img.addEventListener('click', () => {\n                    localStorage.setItem('viewUser', username);\n                    localStorage.setItem('viewUserAvatar', avatar)\n                    localStorage.setItem('viewedUserId', usersId)\n                    setTimeout(() => {\n                        window.location.href = \"../html/userPage.html\"\n                    }, 100);\n                })\n            }\n\n            i++;\n        })\n\n    }\n}\n\n//delete user from firebase\nexport async function deleteUser(id, container: HTMLDivElement) {\n\n    const response = await fetch(url + `/${id}.json`, { method: 'DELETE' });\n    const data = await response.json();\n    console.log(data, \"user is removed\");\n\n    container.innerHTML = '';\n}\n\n//remove all posts from logged in user\nexport async function deletePosts(userId) {\n    const response = await fetch(url + `/${userId}/posts.json`, { method: 'DELETE' });\n    const data = await response.json();\n    console.log(data, \"posts are removed\");\n\n    location.reload();\n}","import { viewProfile, showViewedUsersPosts } from \"./gui\";\nimport { url, listAllUsers } from \"./firebase\";\n\nconst userBeingViewed = document.querySelector('#name') as HTMLElement;\nconst userBeingViewedAvatar = document.querySelector('#avatar') as HTMLImageElement;\nconst usersContainer = document.querySelector('#other-users-container') as HTMLDivElement;\nconst viewedUser = localStorage.getItem('viewUser');\nconst viewedAvatar = localStorage.getItem('viewUserAvatar');\nconst viewedId = localStorage.getItem('viewedUserId');\n\nconst h3 = document.querySelector('#other-user') as HTMLElement;\nh3.innerText = `${viewedUser}'s posts`;\n\nviewProfile(viewedAvatar, viewedUser, userBeingViewedAvatar, userBeingViewed);\ngetViewedUsersPost();\nlistAllUsers(usersContainer);\n\n// get and display all posts from user you are viewing\nconst post = document.querySelector('#post-card') as HTMLDivElement;\nasync function getViewedUsersPost() {\n\n    const response = await fetch(url + `/${viewedId}/posts.json`);\n    const data = await response.json();\n    console.log(data);\n    if (data != null) {\n\n        const postArray = Object.values(data);\n\n        console.log(postArray)\n\n        showViewedUsersPosts(postArray, post);\n    }\n\n}","export async function viewProfile(avatar, user, img:HTMLImageElement, username:HTMLElement) {\n    img.src = avatar;\n    username.innerText = user;\n}\n\nexport function showPosts(arr, container:HTMLDivElement) {\n\n    container.innerHTML = '';\n\n    arr.forEach((element: String) => {\n        const postDiv = document.createElement('div');\n        postDiv.classList.add('post-card');\n        const postTxt = document.createElement('p');\n        postTxt.innerText = `${element}`;\n        postDiv.append(postTxt)\n        container.prepend(postDiv);\n    });\n\n}\n\nexport function showViewedUsersPosts(arr, container:HTMLDivElement) {\n    \n    container.innerHTML = '';\n\n    arr.forEach((element: String) => {\n        const postDiv = document.createElement('div');\n        postDiv.classList.add('post-card');\n        const postTxt = document.createElement('p');\n        postTxt.innerText = `${element}`;\n        postDiv.append(postTxt)\n        container.prepend(postDiv);\n    });\n\n}"],"names":["$14f6629ccf7de9b8$export$128fa18b7194ef","$14f6629ccf7de9b8$var$currentUser","localStorage","getItem","$0af65bff234c3dba$var$userBeingViewed","document","querySelector","$0af65bff234c3dba$var$userBeingViewedAvatar","$0af65bff234c3dba$var$usersContainer","$0af65bff234c3dba$var$viewedUser","$0af65bff234c3dba$var$viewedAvatar","$0af65bff234c3dba$var$viewedId","innerText","async","avatar","user","img","username","src","response","fetch","data","json","console","log","postArray","Object","values","arr","container","$0af65bff234c3dba$var$post","innerHTML","forEach","element","postDiv","createElement","classList","add","postTxt","append","prepend","$0af65bff234c3dba$var$getViewedUsersPost","userListDiv","usersArray","usersKeys","keys","array","i","list","namn","style","maxHeight","userCard","usersId","addEventListener","setItem","setTimeout","window","location","href","getUsersList"],"version":3,"file":"userPage.5deca411.js.map"}